import{l as n}from"./index-72fe37f2.js";import{s as o,S as i}from"./service-97f28bed.js";function p(t=1,e=""){const s=e&&e!=="全部"?`page=${t}&category=${e}`:`page=${t}`;return o({method:"GET",url:`/products?${s}`})}function u(){return o({method:"GET",url:"/products/all"})}function k(t){return o({method:"GET",url:`/product/${t}`})}const c="ttShop",g=n("likes",{state:()=>({products:[],likes:[]}),getters:{likesGetter:({likes:t})=>t,filterLikesProductsGetter:t=>t.products.filter(e=>t.likes.includes(e.id)),noLikesProductsGetter:t=>t.products.filter(e=>!t.likes.includes(e.id))},actions:{async getAllProducts(){var t,e;try{const{data:s}=await u();this.products=s.products}catch(s){i("",((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)||"有錯誤","error")}},async getLikes(){var t,e;try{this.likes=JSON.parse(localStorage.getItem(c)||"[]")}catch(s){i("",((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)||"有錯誤","error")}},async setLike(t){var e,s;try{const r=this.likes.findIndex(a=>a===t);r===-1?this.likes.push(t):this.likes.splice(r,1),localStorage.setItem(c,JSON.stringify(this.likes)),this.getLikes()}catch(r){i("",((s=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:s.message)||"有錯誤","error")}}}});export{k as a,p as g,g as u};
