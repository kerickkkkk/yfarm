import{i as S,J as q,L as D,s as $,h as L,a as G,o as c,c as d,d as h,b as t,u as s,H as R,F as g,v as F,k as m,w as H,t as l,I as M,p as j,f as A}from"./index-5356cf8e.js";import{c as _}from"./filters-87564b85.js";import{u as E}from"./cartsStore-89c1c65c.js";import{_ as J}from"./CartStep-a2b040b7.js";import{B as Q}from"./BannerView-4f5638bb.js";import{_ as U}from"./plugin-vueexport-helper-c27b6911.js";import"./service-76d60509.js";const C=a=>(j("data-v-66e00742"),a=a(),A(),a),z={class:"container"},K=C(()=>t("section",{class:"step d-md-flex"},null,-1)),O={class:"container mt-5"},P={class:"row"},W={class:"text-end"},X={class:"table"},Y=C(()=>t("thead",null,[t("tr",null,[t("th",{class:"d-md-table-cell d-none",scope:"col"}," 商品 "),t("th",{class:"d-md-table-cell d-none",scope:"col"}," 單價 "),t("th",{class:"text-center",scope:"col"},[t("span",{class:"d-md-none d-inline-block"},"商品/"),m("數量 ")]),t("th",{scope:"col"}," 小計 "),t("th",{scope:"col"}," 刪除 ")])],-1)),Z={class:"d-md-table-cell d-none"},tt={class:"cart__title d-flex"},et={class:"me-3"},st=["src","alt"],ot={class:"cart__title__content"},nt={class:"fw-bold"},lt={class:"d-md-table-cell d-none text-end"},ct={class:"fw-bold mb-1 text-center"},dt={class:"text-center"},at={class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},it=["disabled","onClick"],rt=["value","onInput","onChange"],_t=["onClick"],ut={class:"text-end"},pt=["onClick"],ht={key:1},mt={colspan:"100",class:"text-center"},bt={class:"text-end",colspan:"100"},ft={class:"text-end",colspan:"100"},vt={class:"text-end"},gt=["onClick"],Ct={__name:"CartView",setup(a){const k=S("$swal"),y=q(),x=D(),b=E(),{getCarts:w,updateCart:u,deleteCart:V,deleteAllCarts:f}=b,{cartsGetter:i,totalGetter:N,finalTotalGetter:T}=$(b),I=y.meta.step,B=()=>{if(i.value.length<=0)return k("購物車沒產品"),!1;x.push("/checkout")},v=(r,o,p)=>{const e=o.target.value<=0?1:o.target.value;r.qty=e,o.target.value=e,p==="change"&&u(r.id,r.product.id,e)};return L(()=>{w()}),(r,o)=>{const p=G("routerLink");return c(),d(g,null,[h(Q),t("div",z,[h(J,{step:s(I)},null,8,["step"])]),K,t("div",O,[t("div",P,[t("div",W,[s(i).length>0?(c(),d("button",{key:0,class:"btn btn-sm btn-outline-danger",onClick:o[0]||(o[0]=(...e)=>s(f)&&s(f)(...e))}," 清空購物車 ")):R("",!0)]),t("table",X,[Y,t("tbody",null,[s(i).length>0?(c(!0),d(g,{key:0},F(s(i),e=>(c(),d("tr",{key:e.id,class:"align-middle"},[t("td",Z,[t("div",tt,[t("div",et,[t("img",{src:e.product.imageUrl,alt:e.product.title,width:"50",class:"img-fluid"},null,8,st)]),t("div",ot,[t("div",nt,l(e.product.title),1)])])]),t("td",lt," NTD "+l(s(_)(e.product.price)),1),t("td",null,[t("div",ct,l(e.product.title),1),t("div",dt,[t("div",at,[t("button",{disabled:e.qty<2,type:"button",class:"btn btn-primary",onClick:n=>s(u)(e.id,e.product.id,--e.qty)}," - ",8,it),t("input",{value:e.qty,type:"number",min:"1",class:"form-control text-center rounded-0",style:{width:"80px"},onInput:n=>v(e,n),onChange:n=>v(e,n,"change")},null,40,rt),t("button",{type:"button",class:"btn btn-primary",onClick:n=>s(u)(e.id,e.product.id,++e.qty)}," + ",8,_t)])])]),t("td",ut," NTD "+l(s(_)(e.final_total)),1),t("td",null,[t("button",{class:"btn btn-sm btn-outline-danger",onClick:n=>s(V)(e.id)}," 刪除 ",8,pt)])]))),128)):(c(),d("tr",ht,[t("td",mt,[m(" 購物車沒有東西 "),h(p,{to:"/products"},{default:H(()=>[m(" 挑選產品去 ")]),_:1})])]))]),t("tfoot",null,[t("tr",null,[t("td",bt," 原價 NTD "+l(s(_)(s(N))),1)]),t("tr",null,[t("td",ft," 總價 NTD "+l(s(_)(s(T))),1)])])]),t("div",vt,[t("a",{class:"btn btn-secondary rounded-start-0",onClick:M(B,["prevent"])}," 填寫資料 ",8,gt)])])])],64)}}},It=U(Ct,[["__scopeId","data-v-66e00742"]]);export{It as default};
