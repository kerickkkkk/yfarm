import{l as n}from"./index-5356cf8e.js";import{s as o,S as c}from"./service-76d60509.js";function d(){return o({method:"GET",url:"/cart"})}function l(t,e){return o({method:"POST",url:"/cart",data:{data:{product_id:t,qty:e}}})}function u(t,e,a){return o({method:"PUT",url:`/cart/${t}`,data:{data:{product_id:e,qty:a}}})}function p(t){return o({method:"DELETE",url:`/cart/${t}`})}function h(){return o({method:"DELETE",url:"/carts"})}const f=n("carts",{state:()=>({carts:[],total:0,finalTotal:0}),getters:{cartsGetter:({carts:t})=>t,totalGetter:({total:t})=>t,finalTotalGetter:({finalTotal:t})=>t},actions:{async getCarts(){var t,e;try{const{data:a}=await d();this.carts=a.data.carts,this.total=a.data.total,this.finalTotal=a.data.final_total}catch(a){c("",((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||"有錯誤","error")}},async addCart(t,e=1){var a,r;e=e*1||1;try{const{data:s}=await l(t,e);c.fire(s.message||"加入購物車成功"),this.getCarts()}catch(s){c("",((r=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:r.message)||"有錯誤","error")}},async updateCart(t,e,a=1){var r,s;a=a*1||1;try{await u(t,e,a),this.getCarts()}catch(i){c("",((s=(r=i==null?void 0:i.response)==null?void 0:r.data)==null?void 0:s.message)||"有錯誤","error")}},async deleteCart(t){var e,a;try{await p(t),this.getCarts()}catch(r){c("",((a=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:a.message)||"有錯誤","error")}},async deleteAllCarts(t){var e,a;try{await h(t),this.getCarts()}catch(r){c("",((a=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:a.message)||"有錯誤","error")}}}});export{f as u};
