import{K as T,I as N,L as V,s as q,b as B,r as L,o as l,c,e as r,d as t,u as s,F as h,m as M,g as m,w as G,t as n,H as R,C as S,M as U}from"./index-4791cd43.js";import{c as i}from"./filters-2b4b10a0.js";import{u as D}from"./cartsStore-93793008.js";import{_ as F}from"./CartStep-adf0c457.js";import{B as H}from"./BannerView-dd43f435.js";import"./service-37dadeab.js";import"./plugin-vueexport-helper-c27b6911.js";const j={class:"container"},A=t("section",{class:"step d-md-flex"},null,-1),E={class:"container mt-5"},I={class:"row"},K={class:"text-end"},z={class:"table"},J=t("thead",null,[t("tr",null,[t("th",{scope:"col"}," 商品選項 "),t("th",{scope:"col"}," 單價 "),t("th",{scope:"col"}," 數量 "),t("th",{scope:"col"}," 小計 "),t("th",{scope:"col"}," 刪除 ")])],-1),O={class:"cart__title d-flex"},P={class:"me-3"},Q=["src","alt"],W={class:"cart__title__content"},X={class:"h6"},Y=t("p",null,"規格",-1),Z={class:"text-end"},tt={class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},et=["disabled","onClick"],st=["onUpdate:modelValue","onChange"],ot=["onClick"],nt={class:"text-end"},lt=["onClick"],ct={key:1},it={colspan:"100",class:"text-center"},dt={class:"text-end",colspan:"100"},at={class:"text-end",colspan:"100"},rt={class:"text-end"},_t=["onClick"],vt={__name:"CartView",setup(ut){const b=T("$swal"),f=N(),C=V(),_=D(),{getCarts:g,updateCart:d,deleteCart:k,deleteAllCarts:u}=_,{cartsGetter:a,totalGetter:v,finalTotalGetter:y}=q(_),x=f.meta.step,w=()=>{if(a.value.length<=0)return b("購物車沒產品"),!1;C.push("/checkout")};return B(()=>{g()}),(pt,p)=>{const $=L("routerLink");return l(),c(h,null,[r(H),t("div",j,[r(F,{step:s(x)},null,8,["step"])]),A,t("div",E,[t("div",I,[t("div",K,[t("button",{class:"btn btn-sm btn-outline-danger",onClick:p[0]||(p[0]=(...e)=>s(u)&&s(u)(...e))}," 清空購物車 ")]),t("table",z,[J,t("tbody",null,[s(a).length>0?(l(!0),c(h,{key:0},M(s(a),e=>(l(),c("tr",{key:e.id},[t("th",null,[t("div",O,[t("div",P,[t("img",{src:e.product.imageUrl,alt:e.product.title,width:"50",class:"img-fluid"},null,8,Q)]),t("div",W,[t("div",X,n(e.product.title),1),Y])])]),t("td",Z," NT $"+n(s(i)(e.product.price)),1),t("td",null,[t("div",tt,[t("button",{disabled:e.qty<2,type:"button",class:"btn btn-primary",onClick:o=>s(d)(e.id,e.product.id,--e.qty)}," - ",8,et),S(t("input",{"onUpdate:modelValue":o=>e.qty=o,type:"number",min:"1",class:"form-control rounded-0",style:{width:"80px"},onChange:o=>s(d)(e.id,e.product.id,e.qty)},null,40,st),[[U,e.qty]]),t("button",{type:"button",class:"btn btn-primary",onClick:o=>s(d)(e.id,e.product.id,++e.qty)}," + ",8,ot)])]),t("td",nt," NT $"+n(s(i)(e.final_total)),1),t("td",null,[t("button",{class:"btn btn-sm btn-outline-danger",onClick:o=>s(k)(e.id)}," 刪除 ",8,lt)])]))),128)):(l(),c("tr",ct,[t("td",it,[m(" 購物車沒有東西 "),r($,{to:"/products"},{default:G(()=>[m(" 挑選產品去 ")]),_:1})])]))]),t("tfoot",null,[t("tr",null,[t("td",dt," 原價 NT $ "+n(s(i)(s(v))),1)]),t("tr",null,[t("td",at," 總價 NT $ "+n(s(i)(s(y))),1)])])]),t("div",rt,[t("a",{class:"btn btn-secondary rounded-start-0",onClick:R(w,["prevent"])}," 填寫資料 ",8,_t)])])])],64)}}};export{vt as default};
